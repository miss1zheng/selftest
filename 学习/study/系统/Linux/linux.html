<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
	<link rel="shortcut icon" href="../../../../picture/favicon.ico" type="image/x-icon">
	<link rel="stylesheet" type="text/css" href="../../../../home/all.css" >
	<title>linux</title>
	<style>
		p{line-height:25px;}
	</style>
</head>
<body>
	<div class="menu_body" style="padding-left: 20px;">
		<a href="../../../../home.html">首页</a>
		<a href="../../../study.html">学习</a>
		<a href="../../../../工具/tools.html">工具</a>
		<a href="../../../../阅读/read.html">阅读</a>
		<a href="../../../../娱乐/play.html">娱乐</a>
	</div>
	<div class="left_body">
		<ul>
			<li><a href="../../c/c.html">c</a></li>
			<li><a href="../../c++/c++.html">c++</a></li>
			<li><a href="../../css/css.html">css</a></li>
			<li><a href="../../html/html.html">html</a></li>
			<li><a href="../../协议/http/http.html">http</a></li>
			<li><a href="../../java/java.html">java</a></li>
			<li><a href="../../javascript/">javascript</a></li>
			<li><a href="../../python/python.html">python</a></li>
			<li><a href="../../sql/sql.html">Sql</a></li>
			<li><a href="../../php/php.html">php</a></li>
			<li><a href="../../photoshop/photoshop.html">PS</a></li>
			<li><a href="../../cad/cad.html">CAD</a></li>
			<li><a href="../../硬件/硬件.html">硬件</a></li>
			<li><a href="../语言.html">语言</a></li>
			<li><a href="../../系统/系统.html">系统</a></li>
		</ul>
	</div>
	<div class="table_body">
	<a href="#z-"></a><br/><a href="#-mode"></a><br/>
		</div>
	<div class="main_body">
	<p>声明：本实验在VMware Station Play 15虚拟机里安装Ubuntu16.04.6桌面64位版。<br/>Ubuntu下载：<a href="https://ftp.sjtu.edu.cn/ubuntu-cd/">https://ftp.sjtu.edu.cn/ubuntu-cd/</a><br/>VMware Workstation Player下载：<a href="https://www.vmware.com/products/workstation-player/workstation-player-evaluation.html">https://www.vmware.com/products/workstation-player/workstation-player-evaluation.html</a></p>
	<p>终端的格式：username@hostname:dir$，即 用户名@主机名:当前目录用户权限，其中用户权限为#表示这是超级用户，$表示普通用户</p>
	<p>技巧：<br/>一、终端与桌面的切换：桌面切换到终端方法1.直接在文件夹中搜索gnome-terminal；2.命令行输入按alt+F2进入命令行，输入gnome-terminal；3.ctrl+alt+T进入；4.主页第一个搜索图标输入ter搜索即可；5.将终端图标启动器放置在桌面。终端进入桌面快捷键alt+ctrl+F7<br/>
	二、鼠标的切换：ctrl+alt+F1进入全面<br/>三、命令自动补全：Tab键命令自动补齐命令或文件<br/>四、查看历史：1.上下键查看；2.history显示本次登录后使用过的所有命令<br/>五、停止当前命令：ctrl+C</p>
	<p>文件目录操作：/为根目录；~为家目录；.为当前目录；..为上一层目录；-为上一次操作的目录</p>
	<p>文件类型：-为普通文件；d为目录；c为字符设备；b为块设备；s为socket；l为软链接</p>
	<p>操作权限：r为可读；w为可写；x为可执行；其中可用数值表示，421其中4为读2为写1为执行，+-=为增加减少设置权限</p>
	<p>通配符：<br/>星号*：匹配任意长度字符串<br/>问号?：匹配一个长度字符<br/>方括号[...]：匹配其中指定的一个字符<br/>[-]：匹配指定的一个字符范围<br/>[^...]：处理其中指定字符均可匹配</p>
	<p>管道：将一系列命令连起来，以“|”作为管道连接符。第一个输出作为第二个输入，以此类推。</p>
	<p>重定向：输入输出重定向，改变shell命令或程序默认的标准输入输出目标，重新定向到新目标。<br/>&gt; file：将文件重定向文输出源，新建模式<br/>&gt;&gt; file：将文件重定向为输出源，追加模式<br/>&lt; file：将文件重定向为输入源<br/>&gt; 将命令产生的错误信息输入到重定向的指定</p>
	<p>更新源：Linux源位置在/etc/apt/sources.list，可使用命令<br/>sudo cp：cp /etc/apt/sources.list /etc/apt/sources.list_back //备份配置文件<br/>sudo gedit /etc/apt/sources.list //使用记事本打开源文件<br/>sudo apt-get update //更新源</p>
	<p>windows终端控制Linux软件：sercurtCRT、xshell、MobaXterm</p>
	<p></p>
	<p></p>
	<p>IO编程：1.标准IO；2.文件IO<br/>标准IO：1.接口fopenfread/fwrite/fclose；2.ANSI C标准（可移植性好）；3.缓冲；<br/>&nbsp; 缓存：1.目的是尽量减少使用read/write的调用；
	2.定义为系统自动的在内存中为每一个正在使用的文件开辟一个缓冲区，从内存向磁盘输出数据必须先送到内存缓冲区，装满缓冲区在一起送到磁盘中去。从磁盘中读数据，则一次从磁盘文件将一批数据读入到内存缓冲区中，然后再从缓冲区逐个的将数据送到程序的数据区。3.缓冲类型<br/>&nbsp; &nbsp; 缓冲类型：1.全缓冲；2.行缓存；3.无缓冲；<br/>
	&nbsp; &nbsp; 全缓冲：1.冲刷机制为缓冲区满或关闭设备后进行缓冲区冲刷；2.强制冲刷接口fflush；3.容易遇到问题即掉电数据丢失或文件损坏；<br/>&nbsp; &nbsp; 行缓存：冲刷机制为当在输入和输出中遇到新行符 \n 时，进行I/O操作；容易遇到问题时加了打印无输出，忘加 \n<br/>&nbsp; &nbsp; 无缓冲：冲刷机制为立即冲刷；应用场景为标准出错<br/>
	文件IO：1.接口open/read/write/close/ioctl；2.要点；3.无缓冲且实时性高，对字符设备兼容性好，但效率低；<br/>&nbsp; 要点：1.对内核而言所有打开文件（包括设备）都由文件描述符引用；2.文件描述符是一个非负整数，当打开一个现存文件或创建一个新文件时，内核向进程返回一个文件描述符；3.在posix.1应用程序中，幻数0、1、2应被代换成符号常数STDIN_FILENO、STDOUT_FILENO、STDERR_FILENO</p>
	<p>网络编程：1.基础；2.流式套接字；3.数据包套接字；4.服务器模型<br/>
	&nbsp; 基础：1.网络模型为 数据包 -> FTP头+数据包[应用层数据包] -> TCP头+FTP头+数据包[TCP段] -> IP头+TCP头+FTP头+数据包[IP数据报] -> 以太网头(令牌网头，这是解析端主机)+IP头+TCP头+FTP头+数据包+CRC[以太网数据帧/令牌环网数据帧（解析端主机）]，箭头方向的为发送端数据封装过程，反向箭头为接收端数据解封过程；路由器接收到以太网数据帧并根据目标IP地址转发到令牌环网接口（目标主机）；2.ip地址为inet_aton()/inet_addr()/inet_ntoa()；3.端口号：字节序/ntohs/ntohl；4.三次握手四次挥手；5.wireshark抓包分析<br/>
	&nbsp; 流式套接字(tcp)：1.客户端socket()/connect()/write()/read()/close()；2.服务器端：socket()/bind()/listen()/accept()/read()/write()/close()<br/>&nbsp; 数据包套接字(udp)：1.客户端：socket()/sendto()/recvfrom()/close()；2.服务器端：socket()/bind()/recvfrom()/sendto()<br/>&nbsp; 服务器模型：多进程模型、多线程模型、select模型、epoll模型</p>
	<p>进程线程：1.进程；2.线程<br/>进程（资源分配的最小单位）：1.概念也可以称为任务，指的是一个软件或者一个可执行程序的一次运行。可执行程序：静态，放到磁盘，等待执行；进程：动态，占有内存资源，CPU发生调度。2.特性；3相关接口；4.进程间通信<br/>&nbsp; 特性：1.并发性（同一时间可运行多个进程）；2.动态性（进程的状态不断变化）；3.交互性（允许过程中会和其他进程发生直接或间接通信）；4.独立性（拥有完整的进程资源，地址空间独立）<br/>
	&nbsp; 相关接口：1.fork（创建子进程，父进程空间独立）；2.exec函数族（提供在进程中执行另一个程序的方法，另一个程序可为已存在的二进制或脚本程序）；3.system（执行系统命令）；4.exit（进程退出）；5.wait（等待子进程）<br/>
	&nbsp;进程间通信：1.无名管道；2.有名管道；3.信号；4.信号量；5.消息队列；6.共享内存；7.unix套接字（特点为复用socket接口，通信效率高，数据量大）<br/>&nbsp; &nbsp; 无名管道：1.只能用于有亲缘关系的进程之间的通信，单工通信，管道其实是一种特殊的文件描述符，可直接进行读写，并不属于文件系统，存在内存；2.接口pipe()/popen()<br/>&nbsp; &nbsp; 有名管道：1.特点为支持两个不相干进程实现彼此通信，管道可以通过路径名来指出，文件系统可见，建立后当做普通文件读写，允许双向通信，但同一时间只允许半双工通信，若想双向通信需开两个管道；2.接口mkfifo<br/>&nbsp; &nbsp; 信号：1.特点类似硬件中断，是软件层对中断机制的一种模拟，是异步的，事件不一定何时发生，进程无需等待；2.进程对信号的响应方式为忽略信号(SIG_IGN)，除SIGKILL和SIGSTOP外，执行相应的处理函数，执行linux默认操作(SIG_DFL)；2.接口sighandler_t/signal()/pause()/kill()/alarm()<br/>
	&nbsp; &nbsp; 信号量：1.特点为保护共享资源，使得资源在一个时刻只有获得信号量的进程（线程）所拥有；2.接口sem_init()/sem_wait()/sem_trywait()/post()<br/>&nbsp; &nbsp; 消息队列：1.特点类似FIFO先进先出，拥有消息类型，可以实现消息的随机查询；2.接口ftok()/msgget()/msgrcv()/msgsnd()<br/>&nbsp; &nbsp; 特点为通过将一段内存映射到用户进程空间从而达到进程间的通信方式，比起其他通信方式，共享内存是进程间共享数据的一种最快的方式；2.注意点为多进程之间对一个给定存储区访问的互斥；3.接口shmget()/shmat()<br/>
	线程：1.接口pthread_create()/pthread_exit()/pthread_join()；2.互斥pthread_mutex_lock()/pthread_mutex_trylock()/pthread_mutex_unlock()；3.同步pthread_cond_wait()/pthread_cond_broadcast()/pthread_cond_signal()；4.线程与进程区别<br/>&nbsp; 线程与进程区别：1.进程是操作系统资源分配的基本单位，而线程是任务调度和执行的基本单位；2.每个进程都有独立的代码和数据空间，程序之间的切换会有较大的开销；线程可以看做轻量级的进程，同一类线程共享代码和数据空间，每个线程都有自己独立的运行栈，线程之间切换的开销小；3.在操作系统中能同时运行多个进程（程序）；而在同一个进程（程序）中有多个线程同时执行（通过CPU调度，在每个时间片中只有一个线程执行）</p>
	<p>GCC小知识<br/>GCC编译流程：编译器编译.c源代码 -> 预处理器成.i预处理文件 -> 编译器成.s汇编文件 -> 汇编处理成.o汇编文件 -> 链接成.exe可执行文件，即预处理、编译、汇编、链接<br/>GCC基础用法：gcc [options] [filenames]；-c 只编译不链接成可执行，生成.o目标文件；-o 生成可执行文件，若没有给出则默认的可执行文件为a.out，如gcc –o test test.c；-g 产生符号调试工具（GNU的gdb）所必须的符号资讯，对源代码进行调试时必须加入此选项；-O 对程序进行优化编译、链接，编译速度慢但是产生的可执行文件执行效率可以提高；-O2 比-O更好的优化编译、链接，但编译和链接速度更慢；-ldirname 将dirname所指向的目录加到程序头文件目录列表中，在预处理过程中使用；-Ldirname 将dirname所指向的目录加入到程序函数档案库文件的目录列表中，是在链接过程中使用的参数<br/>GCC相关操作详情请看<a href="Makefile.html">Makefile</a></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p>shutdown -h now：现在就关机</p>
	<p>sync：用于数据同步，在关闭linux系统时使用。若直接写入，系统突然断电时数据会丢失，而此指令将存于buffer的数据强制写入硬盘。</p>
	<p>man：接口帮助文档，[]为可选，<>为必选，ctrl+f向下翻页，ctrl+b向上翻页，q退出，/查找...为可变参数，详情http://www.360doc.com/content/17/0505/17/2149364_651360389.shtml</p>
	<p>su：切换用户</p>
	<p>exit：退出当前用户</p>
	<p>sudo：暂时以管理员权限执行</p>
	<p>cd：切换目录</p>
	<p>ls：查看当前文件夹内容，-a显示隐藏文件（即以.开头文件），-l显示具体信息</p>
	<p>pwd：显示当前文件夹绝对路径</p>
	<p>cat：显示文件内容</p>
	<p>mkdir：创建目录</p>
	<p>rmdir：删除目录</p>
	<p>touch：创建普通文件</p>
	<p>rm：删除文件或目录，-r删除目录，-f不询问</p>
	<p>cp：复制</p>
	<p>mv：移动</p>
	<p>chmod：修改文件或目录权限</p>
	<p>tar：压缩解压。tar.gz解压为tar -zxvf xxx.tar.gz，gz解压为gzip -d xxx.gz。<br/>若报错tar: Error is not recoverable: exiting now：1.减去选项-z即可，即-vxf；2.若还是不行则使用unzip命令（需要嵌入插件，可用yum云下载，yum install -y unzip zip）；3.可能是因为在共享文件夹下解压的，换其他位置试试</p>
	<p>find：查找文件</p>
	<p>grep：查找字符串</p>
	<p>vi：命令模式，编辑模式（按i进入，按esc退出），底行模式（命令模式下按shift+:）</p>
	<p>ps：列出进程</p>
	<p>ping：测试网络连通性</p>
	<p>ipconfig/ifconfig：查看网卡信息</p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p>apt-get install：安装软件</p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<li>小知识（或报错）：
		<ol>
		<li>VMware workstation player下的VMware Tools呈现灰色：<br/>在虚拟机中点到对应的系统上，然后找到“虚拟机设置”，在这里面的“硬件”选项里面的“CD/DVD”、"CD/DVD 2"、软盘这三个都设置成自动检测（即选中 使用物理驱动->自动检测），设置完后点击确定，之后再启动系统，这是会就不会呈现灰色，可以点击Vmware Tools了</li>
		<li>VMware虚拟机的linux实现和window主机做目录映射实现：<br/>1.打开共享功能：在虚拟机中点到对应的系统上，然后找到“虚拟机设置”，在这里面的“选项”里面的“共享文件夹”，选中总是启动，添加共享目录，点击确定。<br/>
		2.安装Vmware增加工具（可共享以及复制粘贴）：在虚拟机上安装“Vmware Tools”，安装完成后，系统内的左侧多了Vmware Tools，点进去，将文件夹下的VMwareTools-10.1.6-5214329.tar.gz压缩工具包，拷贝到Documents目录下，再使用命令行终端解压tar -zxvf VMwareTools-10.1.6-5214329.tar.gz，解压完后进入vmware-tools-distrib目录，运行vmware-install.pl，一路yes和回车（遇到有YES的地方选yes，其他没有的直接回车，即默认值就可）。<br/>
		3.需要进行挂载：安装完成后共享是需要挂载才能看到的，而挂载之前需要安装一个插件sudo apt-get install open-vm-tools-desktop fuse，之后再输入sudo vmhgfs-fuse .host:/ /mnt/hgfs/挂载命令，之后重启，然后再cd到根目录下的mnt/hgfs/就可以看到设置的共享目录里的内容了</li>
		<li>安装过程中出现Reading package lists...Done Building dependency tree...：<br/>这种需要更新下APT库，在命令行先输入sudo rm /var/lib/apt/lists/* -vf，然后输入sudo apt-get update，之后再输入sudo apt-get upgrade即可，之后就可以正常使用sudo apt-get install xxx了。</li>
		<li>cp: omitting directory './xxx/'：<br/>因为xxx目录下还有目录，所以不能直接使用cp命令进行拷贝，-r选项能实现目录里面还有目录的拷贝，所以是cp -r ./xxx/ /mnt/xx/</li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		</ol></li>
	<p></p>
	<p></p>
	</div>
</body>
</html>