<!DOCTYPE html>
<html>
<head>
	<title>学习</title>
	<meta http-equiv="Content-Type" content="charset=utf-8;text/html">
	<link rel="shortcut icon" href="../picture/favicon.ico" type="image/x-icon">
	<link rel="stylesheet" type="text/css" href="../home/all.css" >
	<style>
		p{line-height:25px;}
	</style>
</head>
<body>
	<div class="menu_body" style="padding-left: 20px;">
		<a href="../home.html">首页</a>
		<a href="./study.html">学习</a>
		<a href="../工具/tools.html">工具</a>
		<a href="../阅读/read.html">阅读</a>
		<a href="../娱乐/play.html">娱乐</a>
	</div>
	<div class="left_body">
		<ul>
			<li><a href="./study/c/c.html">c</a></li>
			<li><a href="./study/c++/c++.html">c++</a></li>
			<li><a href="./study/css/css.html">css</a></li>
			<li><a href="./study/html/html.html">html</a></li>
			<li><a href="./study/协议/http/http.html">http</a></li>
			<li><a href="./study/java/java.html">java</a></li>
			<li><a href="./study/javascript/javascript.html">javascript</a></li>
			<li><a href="./study/python/python.html">python</a></li>
			<li><a href="./study/sql/sql.html">Sql</a></li>
			<li><a href="./study/php/php.html">php</a></li>
			<li><a href="./study/photoshop/photoshop.html">PS</a></li>
			<li><a href="./study/cad/cad.html">CAD</a></li>
			<li><a href="./study/硬件/硬件.html">硬件</a></li>
			<li><a href="./study/语言/语言.html">语言</a></li>
			<li><a href="./study/系统/系统.html">系统</a></li>
		</ul>
	</div>
	<div class="main_body">
		<ol><li>蓝牙的 MAC 功能：唯一识别码。<br/>
		当两个蓝牙从机 mac 一致时会导致 APP 应用只搜索到一个。此时需要将 MAC 改成随机即可。<br/>
		当两蓝牙一主一从时，主机将 MAC 改成和从机一致之后，可之间连接，当然，这需要代码支持。</li>
		<li>GPS 定位数据解析：
			<ul>
			<li>$GPGGA （全球定位数据）<br/>
				例：$GPGGA,092204.999,4250.5589,S,14718.5084,E,1,04,24.4,19.7,M,,,,0000*1F<br/>
				字段 0：$GPGGA，语句 ID，表明该语句为 Global Positioning System Fix Data（GGA）GPS 定位信息<br/>
				字段 1：UTC 时间，hhmmss.sss，时分秒格式<br/>
				字段 2：纬度 ddmm.mmmm，度分格式（前导位数不足则补 0）<br/>
				字段 3：纬度 N（北纬）或 S（南纬）<br/>
				字段4：经度 dddmm.mmmm，度分格式（前导位数不足则补 0）<br/>
				字段5：经度 E（东经）或 W（西经）<br/>
				字段6：GPS 状态，0=未定位，1=非差分定位，2=差分定位，3=无效 PPS，6=正在估算<br/>
				字段 7：正在使用的卫星数量（00 - 12）（前导位数不足则补 0）<br/>
				字段 8：HDOP 水平精度因子（0.5 - 99.9）<br/>
				字段 9：海拔高度（-9999.9 - 99999.9）<br/>
				字段 10：地球椭球面相对大地水准面的高度<br/>
				字段 11：差分时间（从最近一次接收到差分信号开始的秒数，如果不是差分定位将为空）<br/>
				字段 12：差分站 ID 号 0000 - 1023（前导位数不足则补 0，如果不是差分定位将为空）<br/>
				字段 13：校验值</li>
			<li>$GPGSA （卫星 PRN 数据）<br/>
				例：$GPGSA,A,3,01,20,19,13,,,,,,,,,40.4,24.4,32.2*0A<br/>
				字段 0：$GPGSA，语句 ID，表明该语句为 GPS DOP and Active Satellites（GSA）当前卫星信息<br/>
				字段 1：定位模式，A=自动手动 2D/3D，M=手动 2D/3D<br/>
				字段 2：定位类型，1=未定位，2=2D 定位，3=3D 定位<br/>
				字段 3：PRN 码（伪随机噪声码），第 1 信道正在使用的卫星 PRN 码编号（00）（前导位数不足则补 0）<br/>
				字段 4：PRN 码（伪随机噪声码），第 2 信道正在使用的卫星 PRN 码编号（00）（前导位数不足则补 0）<br/>
				字段 5：PRN 码（伪随机噪声码），第 3 信道正在使用的卫星 PRN 码编号（00）（前导位数不足则补 0）<br/>
				字段 6：PRN 码（伪随机噪声码），第 4 信道正在使用的卫星 PRN 码编号（00）（前导位数不足则补 0）<br/>
				字段 7：PRN 码（伪随机噪声码），第 5 信道正在使用的卫星 PRN 码编号（00）（前导位数不足则补 0）<br/>
				字段 8：PRN 码（伪随机噪声码），第 6 信道正在使用的卫星 PRN 码编号（00）（前导位数不足则补 0）<br/>
				字段 9：PRN 码（伪随机噪声码），第 7 信道正在使用的卫星 PRN 码编号（00）（前导位数不足则补 0）<br/>
				字段 10：PRN 码（伪随机噪声码），第 8 信道正在使用的卫星 PRN 码编号（00）（前导位数不足则补 0）<br/>
				字段 11：PRN 码（伪随机噪声码），第 9 信道正在使用的卫星 PRN 码编号（00）（前导位数不足则补 0）<br/>
				字段 12：PRN 码（伪随机噪声码），第 10 信道正在使用的卫星 PRN 码编号（00）（前导位数不足则补 0）<br/>
				字段 13：PRN 码（伪随机噪声码），第 11 信道正在使用的卫星 PRN 码编号（00）（前导位数不足则补 0）<br/>
				字段 14：PRN 码（伪随机噪声码），第 12 信道正在使用的卫星 PRN 码编号（00）（前导位数不足则补 0）<br/>
				字段 15：PDOP 综合位置精度因子（0.5 - 99.9）<br/>
				字段 16：HDOP 水平精度因子（0.5 - 99.9）<br/>
				字段 17：VDOP 垂直精度因子（0.5 - 99.9）<br/>
				字段 18：校验值</li>
			<li>$GPGSV（卫星状态信息）<br/>
				例：$GPGSV,3,1,10,20,78,331,45,01,59,235,47,22,41,069,,13,32,252,45*70<br/>
				字段 0：$GPGSV，语句 ID，表明该语句为 GPS Satellites in View（GSV）可见卫星信息<br/>
				字段 1：本次 GSV 语句的总数目（1 - 3）<br/>
				字段 2：本条 GSV 语句是本次 GSV 语句的第几条（1 - 3）<br/>
				字段 3：当前可见卫星总数（00 - 12）（前导位数不足则补 0）<br/>
				字段 4：PRN 码（伪随机噪声码）（01 - 32）（前导位数不足则补 0）<br/>
				字段 5：卫星仰角（00 - 90）度（前导位数不足则补 0）<br/>
				字段 6：卫星方位角（00 - 359）度（前导位数不足则补 0）<br/>
				字段 7：信噪比（00－99）dbHz<br/>
				字段 8：PRN 码（伪随机噪声码）（01 - 32）（前导位数不足则补 0）<br/>
				字段 9：卫星仰角（00 - 90）度（前导位数不足则补 0）<br/>
				字段 10：卫星方位角（00 - 359）度（前导位数不足则补 0）<br/>
				字段 11：信噪比（00－99）dbHz <br/>
				字段 12：PRN 码（伪随机噪声码）（01 - 32）（前导位数不足则补 0）<br/>
				字段 13：卫星仰角（00 - 90）度（前导位数不足则补 0）<br/>
				字段 14：卫星方位角（00 - 359）度（前导位数不足则补 0）<br/>
				字段 15：信噪比（00－99）dbHz<br/>
				字段 16：校验值</li>
			<li>$GPRMC（运输定位数据）<br/>
				例：$GPRMC,024813.640,A,3158.4608,N,11848.3737,E,10.05,324.27,150706,,,A*50<br/>
				字段 0：$GPRMC，语句 ID，表明该语句为 Recommended Minimum Specific GPS/TRANSIT Data（RMC）推荐最小 定位信息<br/>
				字段 1：UTC 时间，hhmmss.sss 格式，取值范围 000000.00~235959.99<br/>
				字段 2：状态，A=定位，V=未定位<br/>
				字段 3：纬度 ddmm.mmmm，度分格式（前导位数不足则补 0，取值范围：0000.00000~8959.9999）<br/>
				字段 4：纬度 N（北纬）或 S（南纬）<br/>
				字段 5：经度 dddmm.mmmm，度分格式（前导位数不足则补 0，取值范围：00000.0000~17959.9999）<br/>
				字段 6：经度 E（东经）或 W（西经）<br/>
				字段 7：速度，节，Knots，取值范围 000.00~999.999<br/>
				字段 8：方位角，度，取值范围 000.00~359.99<br/>
				字段 9：UTC 日期，DDMMYY 格式，取值范围 010100~123199<br/>
				字段 10：磁偏角，（000 - 180）度（前导位数不足则补 0），取值范围 00.00~99.99<br/>
				字段 11：磁偏角方向，E=东 W=西<br/>
				字段 12：模式指示及校验和，A=自主定位，D=差分，E=估算，N=数据无效<br/>
				字段 16：校验值 </li>
			<li>$GPVTG（地面速度信息）<br/>
				例：$GPVTG,89.68,T,,M,0.00,N,0.0,K*5F<br/>
				字段 0：$GPVTG，语句 ID，表明该语句为 Track Made Good and Ground Speed（VTG）地面速度信息<br/>
				字段 1：运动角度，000 - 359，（前导位数不足则补 0）<br/>
				字段 2：T=真北参照系<br/>
				字段 3：运动角度，000 - 359，（前导位数不足则补 0）<br/>
				字段 4：M=磁北参照系<br/>
				字段 5：水平运动速度（0.00）（前导位数不足则补 0）<br/>
				字段 6：N=节，Knots<br/>
				字段 7：水平运动速度（0.00）（前导位数不足则补 0）<br/>
				字段 8：K=公里/时，km/h<br/>
				字段 9：校验值</li>
			<li>$GPGLL（大地坐标信息）<br/>
				例：$GPGLL,4250.5589,S,14718.5084,E,092204.999,A*2D<br/>
				字段 0：$GPGLL，语句 ID，表明该语句为 Geographic Position（GLL）地理定位信息<br/>
				字段 1：纬度 ddmm.mmmm，度分格式（前导位数不足则补 0）<br/>
				字段 2：纬度 N（北纬）或 S（南纬）<br/>
				字段 3：经度 dddmm.mmmm，度分格式（前导位数不足则补 0）<br/>
				字段 4：经度 E（东经）或 W（西经）<br/>
				字段 5：UTC 时间，hhmmss.sss 格式</li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li>
				<form>
				<fieldset>
					<legend>** <b>经纬度的度分和度度分转换</b> **</legend>
				/*
				获取的经度和纬度格式分别是：<br/>
				纬度ddmm.mmmmm（度分）<br/>
				经度dddmm.mmmmm（度分）<br/><br/>
				但实际如果想要在百度地图或Google地图中显示,则需要dd.mmmm和ddd.mmmm<br/>
				下面是转换算法:<br/>
				转换后的纬度 = ddmm.mmmm + (mm.mmmm/60)<br/>
				转换后的经度 = dddmm.mmmm + (mm.mmmm/60)<br/><br/>
				注意:1度=60分，并且经纬度数据都是正数，需要自己判断东西南北（东经和北纬是正数，南纬和北经是负数，前面需要加个负号）<br/><br/>
				如：
				纬度：3158.4608<br/>
				58.4608/60=0.974347，即结果为：31.974347<br/>
				经度：11848.3737<br/>
				48.3737/60=0.806228，即结果为118.806228<br/>
				*/<br/><br/>
				#include &lt;stdio.h><br/>
				#include &lt;string.h><br/>
				#include &lt;stdlib.h><br/><br/>

				#define bcc_max 4*1024<br/>
				void data_xor_del(char *data,int data_len)<br/>
				{<br/>
					&nbsp; char check = 0x00;<br/>
					&nbsp; char bcc_data[bcc_max];<br/>
					&nbsp; char String[10];<br/>
					&nbsp; int i = 0;<br/>
					&nbsp; memset(bcc_data,0,bcc_max);<br/>
					&nbsp; memcpy(bcc_data,data,data_len);<br/>
					&nbsp; while(data_len)<br/>
					&nbsp; {<br/>
						&nbsp; &nbsp; check ^= bcc_data[i];<br/>
						&nbsp; &nbsp; i++;data_len--;<br/>
					&nbsp; }<br/>
					&nbsp; sprintf(String,"%x",check);<br/>
					&nbsp; printf("%s\n",String);<br/>
				}<br/><br/>

				int ddmm2dd(const char *ddmm, char *dd)<br/>
				{<br/>
					&nbsp; if (NULL == ddmm || NULL == dd)<br/>
					&nbsp; {<br/>
						&nbsp; &nbsp; printf("ddmm null or dd null\n");<br/>
						&nbsp; &nbsp; return -1;<br/>
					&nbsp; }<br/>
					&nbsp; int lenSrc = strlen(ddmm)+1;<br/>
					&nbsp; int lenMm = 0;<br/>
					&nbsp; int flag = 1; <br/>
					&nbsp; memcpy(dd,ddmm,lenSrc);<br/>
					&nbsp; char *pcMm;double dMm;int iMm; //把pcMm定位到小数点位置<br/>
					&nbsp; pcMm = strstr(dd,"."); <br/>
					&nbsp; if (pcMm == NULL) //不含小数点的情况<br/>
					&nbsp; {<br/>
						&nbsp; &nbsp; pcMm = dd+strlen(dd)-2;<br/>
						&nbsp; &nbsp; iMm = atoi(pcMm);dMm = iMm /60.0;<br/>
					&nbsp; }<br/>
					&nbsp; else //含有小数点的情况<br/>
					&nbsp; {<br/>
						&nbsp; &nbsp; if (pcMm - dd > 2)//有度 <br/>
						&nbsp; &nbsp; {<br/>
							&nbsp; &nbsp; &nbsp; pcMm = pcMm - 2;<br/>
						&nbsp; &nbsp; }<br/>
						&nbsp; &nbsp; else //没有度,只有分<br/>
						&nbsp; &nbsp; {<br/>
							&nbsp; &nbsp; &nbsp; pcMm = dd;<br/>
							&nbsp; &nbsp; &nbsp; flag = 0;<br/>
						&nbsp; &nbsp; }<br/>
						&nbsp; &nbsp; dMm = atof(pcMm);<br/>
						&nbsp; &nbsp; dMm /= 60.0;<br/>
					&nbsp; }<br/>
					&nbsp; sprintf(pcMm,"%lf",dMm);<br/>
					&nbsp; if ( flag )<br/>
					&nbsp; {<br/>
						&nbsp; &nbsp; strcpy(pcMm,pcMm+1);<br/>
					&nbsp; }<br/>
					&nbsp; pcMm = strstr(dd,".");<br/>
					&nbsp; lenMm = strlen(pcMm);<br/>
					&nbsp; if ( lenMm > (6+2))<br/>
					&nbsp; {<br/>
						&nbsp; &nbsp; memset(pcMm+6+2,0,lenMm-6-2);<br/>
					&nbsp; }<br/>
					&nbsp; return 1;<br/>
				}</fieldset>
				</form>
				</li>
			<li></li>
			<li></li></ul>
		</li>
		<li>source insight 中文乱码处理：file -> reload as encoding... -> 然后在里面选中对应的编码即可</li>
		<li>source insght 工具栏折叠隐藏了，如何恢复原来的可视界面：找到 Settings 内的文件，一般位置在  C:\Users\用户名\Documents\Source Insight 4.0\Settings ，然后打开 config_all.xml 文件，找到第一个 Toolbars 字样，删除此标签（标签包括开始和结束标签）保存，然后重新打开 source insight，<br/>
			注意：为防止下次还出现此情况，可将 config_all.xml 备份。这样下次可直接使用此备份替代即可</li>
		<li>PLC 中的 X、Y、M、S、T、C 的意思：<br/>
			X：输入继电器，接 plc 的输入信号<br/>
			Y：输出继电器，接 plc 的输出信号<br/>
			M：辅助继电器<br/>
			S：状态继电器<br/>
			T：时间继电器，计时器<br/>
			C：计数器</li>
		<li>485 通信使能控制脚收发实现：<br/>
			1.发送拉高，接收拉低<br/>
			2.判断完全发送完了之后，还需判断空闲标志位<br/>
			3.以上条件满足再根据串口参数，设置延时，比如 >=115200 不需要加延时；2400需要加延时（具体延时根据 波特率 校验位 停止位等确定）</li>
		<li>SMS 的 pdu 格式发送和接收：在 SMS 短消息模式中有两种，一个是 text 文本模式，支持数字和英文，另一个是 pdu 模式，支持中文，比较复杂，这里就 pdu 进行详细解析说明<br/>
			pdu 收发三种编码格式：7-bit、8-bit、UCS2 编码<br/>
			&nbsp; 7-bit：发送普通的 ASCII 字符，即英文字符，有压缩<br/>
			&nbsp; 8-bit：发送数据消息，无压缩，发什么就是什么<br/>
			&nbsp; UCS2：发送 unicode 字符，双字节字符，支持中文字符<br/>
			<table border="1"  cellspacing="0">
				<caption>发送格式</caption>
				<tr><th>格式</th>	<th>名称</th>					<th>长度</th>	<th>描述</th></tr>
				<tr><td>SCA</td>	<td>Service Center Address</td>	<td>1-12</td>	<td>短消息服务中心号码</td></tr>
				<tr><td>PDU-TYPE</td><td>Protocol Data Unit</td>	<td>1</td>		<td>协议数据单元类型</td></tr>
				<tr><td>MR</td>		<td>Message Reference</td>		<td>1</td>		<td>所有成功的短信发送参考数目，0-255</td></tr>
				<tr><td>DA</td>		<td>Destination Address</td>	<td>2-12</td>	<td>接收方手机号=len+type+phone，81 国内；91 国外（必须在号码前加 86，否则无法发送）</td></tr>
				<tr><td>PID</td>	<td>Protocol Identifer</td>		<td>1</td>		<td>参数显示消息中心以何种方式处理消息内容，对于标准的 MS-to-SC 只需设置成 00</td></tr>
				<tr><td>DCS</td>	<td>Data Coding Scheme</td>		<td>1</td>		<td>参数显示用户数据编码</td></tr>
				<tr><td>SCTS</td>	<td>Service Center Time Stamp</td><td>7</td>	<td>消息中心收到消息的时间戳</td></tr>
				<tr><td>VP</td>		<td>Validity Period</td>		<td>0,1,7</td>	<td>参数显示消息有效期</td></tr>
				<tr><td>UDL</td>	<td>User Data Lenghth</td>		<td>1</td>		<td>用户数据长度，7-bit 指原始短消息字符个数，非编码后字节数；8-bit 指字节数；UCS2 指字节数，为原始短消息的字节数两倍</td></tr>
				<tr><td>UD</td>		<td>User Data</td>				<td>0-XX</td>	<td>用户数据</td></tr>
				<tr><td></td><td></td><td></td><td></td><td></td></tr>
			</table>
			比如：向 15050850677 发送一条短信，内容“Test”<br/>
			0011000D91685150800576F70000C404D4F29C0E<br/>
			解析如下：
			<table border="1"  cellspacing="0">
				<tr><td>SCA</td>	<td>PDU-Type</td><td>MR</td><td>DA</td>					<td>PID</td><td>DCS</td><td>VP</td>		<td>UDL</td><td>UD</td></tr>
				<tr><td>1-12</td>	<td>1</td>		<td>1</td>	<td>2-12</td>				<td>1</td>	<td>1</td>	<td>0,1,7</td>	<td>1</td><td>0-xx</td></tr>
				<tr><td>00</td>		<td>11</td>		<td>00</td>	<td>0D91685150800576F7</td>	<td>00</td>	<td>00</td>	<td>C4</td>		<td>04</td><td>D4F29C0E</td></tr>
			</table>
			其中 DA 组成为：长度+类型+号码=1+1+第一字节得出的长度（0D 91 685150800576F，奇数则在末尾加‘F’补齐）<br/>
			<br/>
			<table border="1"  cellspacing="0">
				<caption>接收格式</caption>
				<tr><th>格式</th>	<th>名称</th>					<th>长度</th>	<th>描述</th></tr>
				<tr><td>SCA</td><td>Service Center Address</td><td>1-12</td><td>短消息服务中心地址格式</td></tr>
				<tr><td>PDU-Type</td><td>Protocol Data Unit</td><td>1</td><td>协议数据单元类型</td></tr>
				<tr><td>DA</td><td>Destination Address</td><td>2-12</td><td>接收方地址（手机号码）</td></tr>
				<tr><td>PID</td><td>Protocol Identifer</td><td>1</td><td>参数显示消息中心以何种方式处理消息内容（比如FAX,Voice）</td></tr>
				<tr><td>DCS</td><td>Data Coding Scheme</td><td>1</td><td>参数显示用户数据编码方案</td></tr>
				<tr><td>SCTS</td><td>Service Center Time Stamp</td><td>7</td><td>消息中心收到消息时的时间戳</td></tr>
				<tr><td>UDL</td><td>User Data Lenghth</td><td>1</td><td>用户数据长度</td></tr>
				<tr><td>UD</td><td>User Data</td><td>0-XX</td><td>用户数据</td></tr>
			</table>
			比如：从 15050850677 接收一条短信，内容“你好”<br/>
			0891683110402505F0240B915150800576F7000801112081600423044F60597DFF01<br/>
			解析如下：
			<table border="1"  cellspacing="0">
				<tr><td>SCA</td>			<td>PDU-Type</td><td>DA</td>				<td>PID</td><td>DCS</td><td>SCTS</td>			<td>UDL</td><td>UD</td></tr>
				<tr><td>1-12</td>			<td>1</td>		<td>2-12</td>				<td>1</td>	<td>1</td>	<td>7</td>				<td>1</td><td>0-xx</td></tr>
				<tr><td>0891683110402505F</td><td>24</td>	<td>0B915150800576F7</td>	<td>00</td>	<td>08</td>	<td>01112081600423</td>	<td>04</td><td>4F60597D</td></tr>
			</table>
			其中 SCA 组成为：长度+类型+号码=1+1+第一字节得出的长度（08 91 683110402505F0）<br/>
			SCTS：如 30302180635480 表示 2003/3/12,08:36:45+8
			</li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		</ol>
		
	</div>
</body>
</html>